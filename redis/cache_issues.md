# 캐시 사용시 발생할 수 있는 이슈

## 1. 캐시 쇄도
* 키 값들의 유효기간을 같게 설정한 경우 일괄적으로 유효기간이 만료될 수 있다. 그러면 순간적으로 DB에 대한 부하가 급증할 수 있다.
* Jetty를 이용해서 유효기간 값을 일정한 범위 내에서 분산 시킬 수 있다.
## 2. 캐시 관통
* 키 값에 해당하는 데이터가 DB에 존재하지 않을 경우 null 값을 반환한다.
* 하지만 null이 데이터가 캐싱이 안된건지 DB에 값이 없는 것인지 불명확하기 때문에 매번 DB에 요청을 보내게 된다.
* 이 때 널 오브젝트 패턴을 사용하면 해결할 수 있다.
## 3. 캐시 시스템 장애
* 캐시 서버가 다운될 수도 있다. 그런 경우에 DB로 접근하도록 설정할 수 있다.
* 하지만 부가 기능의 경우 이러한 처리를 다시 생각해볼 필요가 있는게 캐시를 사용하는 모든 트래픽이 DB에 부하를 주게 되면 캐시를 사용하지 않는 기능들도 영향을 받을 수도 있다.
* 따라서 부가 기능의 경우 캐시 서버가 다운이 되면 차라리 대체 UX를 제공하는 등 다른 처리를 하는 것이 옳을 수도 있다.
## 4. 핫 키
* 요청이 많이 들어오는 핫 키의 유효기간 만료에 따른 재설정시 동시성 문제가 발생할 수 있다.
* 따라서 핫 키의 조회와 생성에 분산락을 걸어주는 방법으로 해결할 수 있다.